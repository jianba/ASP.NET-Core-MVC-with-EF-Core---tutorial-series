@*@{
        ViewData["Title"] = "Index";
    }

    <h1>Index</h1>

    @model ContosoUniversity.Models.TestViewModels.ArticleViewModel

        @{
            ViewData["Title"] = "Index";
        }

        <h2>@Model.AuthorName</h2>


        @Html.Partial("AuthorPartial", Model.AuthorName)

        @foreach (var section in @Model.Sections)
        {
            @Html.Partial("ArticleSection", section);
        }*@

@model ContosoUniversity.Models.TestViewModels.TestAjaxViewModel

@{
    ViewData["Title"] = "CreateOrderAndCargo";
}

<h1>Test</h1>

<hr />

<div>
    <div>
        <p>123dferdwerfvcedxws</p>
        <select name="select" class="" id="selectId" onclick="SelectClick()">
            <option id="optionId" style="width:auto">Test</option>
            @if (Model.Lists.Count != 0)
            {
                int count = Model.Lists.Count();
                for (int item = 0; item < count; item++)
                {
                    <option id="option">@Model.Lists[item].ToString()</option>
                }
            }
        </select>
    </div>

    <div>
        <input id="testJsInput" value="132323" type="text" />
        <input id="btnAdd" value="Add" type="button" class="btn btn-primary" onclick="btnAddClick()">
    </div>
</div>
<h3>----------------------</h3>
<div>
    @await Component.InvokeAsync("AutoAddListValue")
</div>

@section scripts{
    <script src="~/js/jquery-3.4.1/jquery-3.4.1.js" type="text/javascript"></script>
    <script src="~/js/jquery-3.4.1/jquery-ui-1.12.1.js" type="text/javascript"></script>
    <script src="~/js/jquery-3.4.1/jquery.unobtrusive-ajax.js" type="text/javascript"></script>

    <script>
        var btnAddClick = function () {
            alert("22222");

            inputVal = $('#testJsInput').val();
            //alert(inputVal);

            $.ajax({
                url: '/Test/SaveInputValue',
                data: {
                    name: inputVal
                },
                type: 'post',
                async: true,
                cache: false,
                success: function (data) {
                    alert(data.code);
                    var option = "<option id='optionId'>";
                    option += inputVal;
                    option += "<option>";
                    $("#selectId").append(option);
                },
                error: function () {
                    alert('fail');
                }
            });

        }

        var ComponentBtnDisplayClick = function () {

            $('#ComponentBtnAdd').removeClass("d-none");
            $('#ComponentTestJsInput').removeClass("d-none");
            $('#ComponentBtnDisplay').addClass("d-none");
        }

        var ComponentBtnAddClick = function () {
            //alert("666666");

            $('#ComponentBtnAdd').addClass("d-none");
            $('#ComponentTestJsInput').addClass("d-none");
            $('#ComponentBtnDisplay').removeClass("d-none");

            inputVal = $('#ComponentTestJsInput').val();
            //alert(inputVal);

            $.ajax({
                url: '/Test/SaveInputValue',
                data: {
                    name: inputVal
                },
                type: 'post',
                async: true,
                cache: false,
                success: function (data) {
                    //alert(data.code);
                    var option = "<option id='ComponentOptionId'>";
                    option += inputVal;
                    option += "</option>";
                    $("#ComponentSelectId").append(option);

                    var obj = document.getElementById("ComponentSelectId");                    
                    obj[obj.length - 1].selected = true;
                },
                error: function () {
                    alert('fail');
                }
            });
        }

    </script>
}
